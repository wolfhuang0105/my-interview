<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Wolf Huang | InterView GuideLine</title>
    <!-- 載入核心庫 -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=Noto+Sans+TC:wght@400;700;900&display=swap');
        
        :root {
            --primary: #2563eb;
            --dark: #0f172a;
        }

        body { 
            font-family: 'Inter', 'Noto Sans TC', sans-serif; 
            margin: 0;
            background-color: #0f172a; 
            color: #1e293b;
            overflow: hidden; 
            height: 100vh;
        }

        .slide-enter { 
            animation: slideIn 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards; 
        }
        @keyframes slideIn { 
            from { opacity: 0; transform: translateY(4px); } 
            to { opacity: 1; transform: translateY(0); } 
        }

        /* 頂部導航退讓加強：避開動態島 */
        .mega-nav {
            padding-top: calc(env(safe-area-inset-top, 24px) + 12px);
            padding-bottom: 4px;
        }

        .mega-nav-item {
            transition: all 0.2s ease;
            font-size: clamp(7.5px, 0.75vh, 9px);
            padding: 2px 6px;
        }
        .mega-nav-active {
            background: #2563eb !important;
            color: white !important;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        /* 文字縮放平衡 */
        .responsive-title { font-size: clamp(1rem, 2.2vh, 2.5rem); }
        .responsive-point { font-size: clamp(0.65rem, 1.2vh, 0.95rem); }
        .responsive-script { font-size: clamp(0.8rem, 1.8vh, 2.4vh); }

        .custom-scroll::-webkit-scrollbar { width: 3px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.15); border-radius: 10px; }
        
        .layout-transition { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }

        /* 字典背景遮罩：隔離滑動衝突 */
        .modal-overlay {
            background: rgba(15, 23, 42, 0.92);
            backdrop-filter: blur(12px);
            z-index: 600;
            pointer-events: auto;
        }

        .glossary-link {
            color: #2563eb;
            border-bottom: 1.5px dashed rgba(37, 99, 235, 0.6);
            cursor: pointer;
            font-weight: 900;
            transition: all 0.2s ease;
            display: inline-block;
        }

        /* 小卡容器：確保內容不外溢並加大按鈕熱區 */
        .glossary-card {
            background: white;
            border: 1px solid #f1f5f9;
            border-radius: 2rem;
            padding: 1.25rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        /* 播放膠囊拉抬：徹底避開底部紅框區 */
        .audio-capsule {
            backdrop-filter: blur(20px);
            background: rgba(30, 41, 59, 0.85);
            border: 1px solid rgba(255,255,255,0.1);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        const Icon = ({ name, size = 12, className = "" }) => {
            const spanRef = useRef(null);
            useEffect(() => {
                if (window.lucide && spanRef.current) {
                    window.lucide.createIcons();
                }
            }, [name, size, className]);
            return <span ref={spanRef} className={`inline-flex shrink-0 items-center justify-center ${className}`} style={{ width: size, height: size }}><i data-lucide={name} style={{ width: size, height: size }}></i></span>;
        };

        const App = () => {
            const [currentSlide, setCurrentSlide] = useState(0);
            const [isSpeaking, setIsSpeaking] = useState(false);
            const [scriptHistory, setScriptHistory] = useState({}); 
            const [activeVersions, setActiveVersions] = useState({}); 
            const [editingScript, setEditingScript] = useState(null); 
            const [activeTooltip, setActiveTooltip] = useState(null);

            const touchStart = useRef(0);
            const touchEnd = useRef(0);

            // 字典資料定義池 (全英文)
            const dictionary = useMemo(() => ({
                "PMP®": { full: "Project Management Professional", def: "The global gold standard of project management certification, focusing on scalable governance and strategic outcomes.", mentions: [1, 2, 8] },
                "PMP": { full: "Project Management Professional", def: "A credential covering Agile, Predictive, and Hybrid project methodologies to drive enterprise value.", mentions: [1, 2, 8] },
                "ROI": { full: "Return on Investment", def: "A performance measure used to evaluate the efficiency or profitability of an investment in digital tools.", mentions: [1, 8] },
                "PMO": { full: "Project Management Office", def: "A strategic department that establishes standardization, risk control, and resource optimization for all programs.", mentions: [2, 7] },
                "DX": { full: "Digital Transformation", def: "Reshaping business models through technical innovation to fundamentally change how value is delivered.", mentions: [1, 3, 6, 8] },
                "PLM": { full: "Product Lifecycle Management", def: "Integrating R&D, design, and manufacturing into a unified digital data flow across the product life cycle.", mentions: [1, 3, 5] },
                "ERP": { full: "Enterprise Resource Planning", def: "Core software used to manage day-to-day business activities such as supply chain and finance.", mentions: [1, 3, 5] },
                "MES": { full: "Manufacturing Execution System", def: "Real-time monitoring and control of the production floor, tracking raw materials to finished goods.", mentions: [1, 3, 5] },
                "CRM": { full: "Customer Relationship Management", def: "A strategic tool for managing lead lifecycles, driving revenue growth, and tracking business opportunities.", mentions: [1, 3, 5] },
                "FSC": { full: "Financial Supervisory Commission", def: "The top regulator for the financial industry, demanding high standards of system compliance and security.", mentions: [4] },
                "NPI": { full: "New Product Introduction", def: "The end-to-end process of transforming a research concept into a mass-produced, market-ready product.", mentions: [5] },
                "RFQ": { full: "Request for Quotation", def: "The starting point of a business opportunity and the first data node in a digitized sales funnel.", mentions: [5] },
                "SME": { full: "Small and Medium Enterprise", def: "A dynamic environment requiring flexibility, rapid iteration, and the ability to build systems from 0 to 1.", mentions: [4] },
                "SA": { full: "Systems Analyst", def: "A bridge professional responsible for deconstructing business processes and designing technical architectures.", mentions: [5] },
                "InfoSec": { full: "Information Security", def: "The highest priority defense boundary for data integrity during the digital transformation process.", mentions: [4] },
                "AI": { full: "Artificial Intelligence", def: "A future engine used to double productivity through automation, predictive analysis, and intelligent scaling.", mentions: [3, 8] },
                "0 to 1": { full: "Ground-up Infrastructure Build", def: "The pioneering capability to establish sustainable mechanisms and frameworks from scratch in immature environments.", mentions: [3, 8] },
                "Owner": { full: "Business Owner / Founder Mindset", def: "A perspective that prioritizes execution efficiency and resource allocation over traditional management hierarchy.", mentions: [4, 5] }
            }), []);

            const originalSlides = useMemo(() => [
                { id: "cover", type: "cover", title: "InterView GuideLine", subtitle: "Wolf Huang, PMP® | Strategic Governance", content: ["PMP® Certified", "15 Yrs Exp.", "Digital Transformation"], script: null },
                {
                    id: "skills",
                    title: "Key Skills Summary",
                    type: "dual",
                    left: { label: "EXPERIENCE SUMMARY", items: ["14 years managing cross‑industry projects, DX rollouts, and process improvement.", "Over 7 years leading enterprise IT, PLM and CRM initiatives.", "6 years as studio co‑founder leading delivery and operations."] },
                    right: { label: "INDIVIDUAL TRIPLE COMBO", reason: "Hybrid Competency Architecture", items: ["Direct Technical Execution: Build automated tools with coding.", "Cross-Functional Synergy: Bridge tech with business strategy.", "Global Scalable Governance: PMP® framework for growth."] },
                    scriptLeft: "With 14 years across IT and finance, I've led high-impact digital transformations.",
                    scriptRight: "I offer a powerful three-point combo: hands-on technical skill, cross-functional leadership, and PMP governance."
                },
                {
                    id: "analysis",
                    title: "Self‑Analysis",
                    type: "dual",
                    left: { label: "CORE STRENGTHS", items: ["Practical Implementation power.", "Scalable PMO Frameworks.", "Remote Leadership."] },
                    right: { label: "GROWTH AREAS", reason: "Global Horizon Expansion", details: ["Western multinational team exposure.", "Scaling proven models globally."] },
                    scriptLeft: "My core strength is implementation power. I build actual systems needed for success.",
                    scriptRight: "I'm actively seeking more exposure to Western multinational environments to scale globally."
                },
                {
                    id: "approach",
                    title: "Strategy: Start to Scale",
                    type: "dual",
                    left: { label: "HOW I START (0 TO 1)", items: ["Infrastructure setup in immature environments.", "Converting knowledge into systems.", "Small Steps, Fast Pace visualized wins."] },
                    right: { label: "OUTLOOK & DETAILS", reason: "Intelligent Operational Scaling", items: ["AI‑Augmented Scale: performance doubling.", "Ecosystem Integration: Unified data flow.", "Agile Pathfinding: Iterative reactions."] },
                    scriptLeft: "How do I start? I build from zero to one with a 'small steps, fast pace' strategy.",
                    scriptRight: "Looking ahead, I focus on Intelligent Operational Scaling by integrating AI and unified data flows."
                },
                {
                    id: "softbi_combined",
                    title: "Career Deep‑Dive: SoftBI",
                    type: "dual",
                    left: { label: "RESULT / IMPACT", items: ["Managed 50+ concurrent projects.", "FSC and InfoSec compliance expert.", "High‑end Asset Mgmt (Banking)."] },
                    right: { label: "EXIT REASON", reason: "Resource Optimization", details: ["Shoulder-to-shoulder with owner.", "Founder's mindset on allocation.", "Mission matured in SME environment."] },
                    scriptLeft: "At SoftBI, I managed over 50 projects and handled systems complying with FSC regulations.",
                    scriptRight: "I worked shoulder-to-shoulder with the owner. Mission matured, now seeking a larger stage."
                },
                {
                    id: "gbjm_combined",
                    title: "Career Deep‑Dive: GBJM",
                    type: "dual",
                    left: { label: "RESULT / IMPACT", items: ["Unified RFQ to Quality data flow.", "Taipei R&D to Dongguan Mfg bridge.", "Senior SA managing full lifecycle."] },
                    right: { label: "EXIT REASON", reason: "Family Roots & Banking", details: ["Banking family executive background.", "Professional homecoming to Taiwan."] },
                    scriptLeft: "At GBJM, I connected all data islands from RFQ to quality control as a Senior SA.",
                    scriptRight: "Mission accomplished. Returning to the finance sector felt like homecoming."
                },
                {
                    id: "consulting_combined",
                    title: "Career Deep‑Dive: Consulting",
                    type: "dual",
                    left: { label: "RESULT / IMPACT", items: ["Promoted quickly to Subsidiary Mgr.", "Scaled team 3x during pandemic.", "Built training portal: 2x faster."] },
                    right: { label: "EXIT REASON", reason: "Visionary Expansion", details: ["Moving Client‑Side for impact.", "Focus on long-term DX results."] },
                    scriptLeft: "In Shanghai, I built the team from scratch and doubled new-hire ramp-up speed.",
                    scriptRight: "After years of consulting, I wanted to go 'client-side' to drive real operational optimization."
                },
                {
                    id: "philosophy",
                    title: "Philosophy: Dots",
                    type: "dual",
                    left: { label: "CAREER PILLARS", items: ["Trade training: Economic logic.", "Music Industry: Survival grit.", "IT: Hands‑on power.", "PMO: Strategic leadership."] },
                    right: { label: "THE WOLF HYBRID DNA", reason: "Synergy of Markers", details: ["Resilience: zero resources survival.", "Bilingual: Business and Tech bridge."] },
                    scriptLeft: "My journey is defined by four pillars: Trade, Music, IT, and PMO strategy.",
                    scriptRight: "Steve Jobs said you only connect dots looking backwards. These are my personal markers."
                },
                {
                    id: "future_outlook",
                    title: "Future Outlook: Goals",
                    type: "dual",
                    left: { label: "FUTURE MISSION", items: ["Establishing scalable models.", "Methodology for core work focus.", "Leveraging AI for performance."] },
                    right: { label: "GOAL & DETAILS FOLLOW", items: ["Final Stage: TSMC‑DX.", "Interview: ASUS‑PMO / Castles‑DX.", "Expected: 1.4M+ NTD."] },
                    scriptLeft: "My goal is to be a system architect for global processes, leverages AI.",
                    scriptRight: "I'm ready for late February. I'm in final stages with TSMC, ASUS, and Castles."
                },
                {
                    id: "glossary_slide",
                    title: "Glossary & Dictionary Pool",
                    type: "glossary_interactive",
                    categories: [
                        { label: "GOVERNANCE & VALUE", keys: ["PMP®", "PMO", "ROI", "SA", "Owner"] },
                        { label: "SYSTEMS & TECHNOLOGY", keys: ["DX", "PLM", "ERP", "MES", "CRM", "InfoSec"] },
                        { label: "PROCESS & STAGES", keys: ["NPI", "RFQ", "FSC", "SME", "0 to 1", "AI"] }
                    ],
                    script: null 
                }
            ], []);

            const navStructure = [
                { id: 1, title: "I. INTRO", slides: [1, 2, 3], labels: ["Skills", "Analysis", "Approach"] },
                { id: 2, title: "II. HISTORY", slides: [4, 5, 6, 7], labels: ["SoftBI", "GBJM", "CONSULT", "Philosophy"] },
                { id: 3, title: "III. VISION", slides: [8], labels: ["Outlook/Goals"] },
                { id: 4, title: "IV. APPX", slides: [9], labels: ["Glossary"] }
            ];

            const goToSlide = (idx) => { setCurrentSlide(idx); window.speechSynthesis.cancel(); setIsSpeaking(false); setActiveTooltip(null); };
            
            const speak = (text, lang = 'en-US') => {
                window.speechSynthesis.cancel();
                if (isSpeaking) { setIsSpeaking(false); return; }
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = lang;
                utterance.rate = 0.95;
                utterance.onend = () => setIsSpeaking(false);
                window.speechSynthesis.speak(utterance);
                setIsSpeaking(true);
            };

            const handleTouchStart = (e) => { touchStart.current = e.targetTouches[0].clientX; };
            const handleTouchMove = (e) => { touchEnd.current = e.targetTouches[0].clientX; };
            const handleTouchEnd = () => {
                // 如果彈窗開啟，禁止換頁滑動手勢
                if (activeTooltip) return;
                const diff = touchStart.current - touchEnd.current;
                if (diff > 70) goToSlide(Math.min(originalSlides.length - 1, currentSlide + 1));
                if (diff < -70) goToSlide(Math.max(0, currentSlide - 1));
            };

            const getScriptText = (slideId, type) => {
                const verIdx = activeVersions[slideId]?.[type];
                const history = scriptHistory[slideId]?.[type];
                if (verIdx !== undefined && history && history[verIdx]) return history[verIdx].text;
                const slide = originalSlides.find(s => s.id === slideId);
                if (type === 'single') return slide.script;
                return slide[`script${type.charAt(0).toUpperCase() + type.slice(1)}`];
            };

            const FormattedText = ({ text }) => {
                if (!text) return null;
                const keys = Object.keys(dictionary).sort((a, b) => b.length - a.length);
                const regex = new RegExp(`(\\b(?:${keys.map(k => k.replace(/[®]/g, '®?')).join('|')})\\b)`, 'g');
                const parts = text.split(regex);
                return (
                    <span>{parts.map((part, i) => dictionary[part] ? (
                        <span key={i} className="glossary-link" onClick={(e) => { 
                            e.stopPropagation(); // 阻止背景點擊關閉
                            setActiveTooltip({ term: part, ...dictionary[part] }); 
                        }}>{part}</span>
                    ) : part)}</span>
                );
            };

            const TermCard = ({ term, entry, isModal = false, onClose = null }) => (
                <div 
                    className={`${isModal ? 'bg-white p-6 rounded-[2.5rem] shadow-2xl border border-blue-100 max-w-[320px]' : 'glossary-card'}`}
                    onClick={(e) => e.stopPropagation()} // 核心修復：阻止內部所有點擊冒泡至背景
                >
                    <div className="flex justify-between items-start mb-1">
                        <div className="px-2 py-0.5 bg-blue-600 text-white rounded text-[8px] font-black uppercase tracking-widest">{term}</div>
                        {isModal && (
                            <button onClick={(e) => { e.stopPropagation(); onClose(); }} className="p-1 hover:bg-slate-50 rounded-full transition-colors">
                                <Icon name="x" size={16} className="text-slate-300"/>
                            </button>
                        )}
                    </div>
                    
                    <div className="flex items-center justify-between group mb-1.5 gap-2">
                        <h4 className={`${isModal ? 'text-base' : 'text-[10px]'} font-black text-slate-900 leading-tight`}>{entry.full}</h4>
                        <button 
                            onClick={(e) => { e.stopPropagation(); speak(entry.full, 'en-US'); }} 
                            className="shrink-0 p-2 bg-blue-50 text-blue-600 hover:bg-blue-600 hover:text-white rounded-xl transition-all shadow-sm active:scale-90"
                        >
                            <Icon name="volume-2" size={isModal ? 14 : 10}/>
                        </button>
                    </div>

                    <div className="bg-slate-50/60 p-3 rounded-2xl mb-2 relative group border border-slate-100">
                        <p className={`${isModal ? 'text-[11px]' : 'text-[9.5px]'} text-slate-500 font-bold italic leading-relaxed pr-8`}>{entry.def}</p>
                        <button 
                            onClick={(e) => { e.stopPropagation(); speak(entry.def, 'en-US'); }} 
                            className="absolute top-2 right-2 p-1.5 bg-white text-slate-300 hover:text-blue-600 rounded-lg shadow-sm transition-all active:scale-90"
                        >
                            <Icon name="play" size={10}/>
                        </button>
                    </div>

                    <div className={`pt-2 border-t border-slate-100`}>
                        <span className="text-[8px] font-black text-slate-400 uppercase tracking-widest block mb-1.5">Mentioned in:</span>
                        <div className="flex flex-wrap gap-2">
                            {entry.mentions.map(m => (
                                <button 
                                    key={m} 
                                    onClick={(e) => { e.stopPropagation(); goToSlide(m); }} 
                                    className="px-4 py-1.5 bg-blue-50 hover:bg-blue-600 text-blue-600 hover:text-white border border-blue-100 rounded-xl text-[10px] font-black transition-all active:scale-90"
                                >
                                    #P{m}
                                </button>
                            ))}
                        </div>
                    </div>
                </div>
            );

            const slide = originalSlides[currentSlide];
            const activeScripts = { single: getScriptText(slide.id, 'single'), left: getScriptText(slide.id, 'left'), right: getScriptText(slide.id, 'right') };

            return (
                <div className="flex flex-col h-screen bg-[#0f172a] overflow-hidden" onTouchStart={handleTouchStart} onTouchMove={handleTouchMove} onTouchEnd={handleTouchEnd}>
                    
                    {/* 字典彈窗背景遮罩 */}
                    {activeTooltip && (
                        <div className="fixed inset-0 modal-overlay flex items-center justify-center p-4" onClick={() => setActiveTooltip(null)}>
                            <div className="slide-enter">
                                <TermCard term={activeTooltip.term} entry={activeTooltip} isModal={true} onClose={() => setActiveTooltip(null)} />
                            </div>
                        </div>
                    )}

                    <nav className="shrink-0 bg-[#0f172a] border-b border-slate-800 p-2 z-50 shadow-2xl mega-nav">
                        <div className="max-w-[1440px] mx-auto grid grid-cols-4 gap-1.5">
                            {navStructure.map(part => (
                                <div key={part.id} className="flex flex-col gap-0.5">
                                    <div className="text-[6px] md:text-[8px] font-black text-slate-500 uppercase tracking-widest px-1 flex items-center gap-1">
                                        <div className={`w-1 h-1 rounded-full ${part.slides.includes(currentSlide) ? 'bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.8)]' : 'bg-slate-700'}`}></div> {part.title}
                                    </div>
                                    <div className="flex flex-wrap gap-1">
                                        {part.slides.map((sIdx, i) => (
                                            <button key={sIdx} onClick={() => goToSlide(sIdx)}
                                                className={`mega-nav-item rounded-sm font-bold uppercase border border-transparent 
                                                    ${currentSlide === sIdx ? 'mega-nav-active' : 'bg-slate-800/40 text-slate-400 hover:bg-slate-800'}`}
                                            > {part.labels[i]} </button>
                                        ))}
                                    </div>
                                </div>
                            ))}
                        </div>
                    </nav>

                    <div className="flex-1 flex flex-col bg-[#f8fafc] text-slate-800 min-h-0 relative">
                        <div className="px-4 py-1 bg-white border-b border-slate-100 flex items-center justify-between shrink-0">
                            <div className="flex items-center gap-2 text-[8px] font-black text-slate-400 uppercase tracking-widest">
                                <Icon name="shield-check" className="text-blue-600" /> <span>Wolf_Panel_v18.0</span>
                                <Icon name="chevron-right" className="text-slate-200" /> <span className="text-blue-600">{slide.title}</span>
                            </div>
                        </div>

                        {/* 上半部大綱：擴大至 65% 給予主體內容最大空間 */}
                        <section className={`flex flex-col items-center justify-center p-4 md:px-12 bg-white shrink-0 layout-transition overflow-hidden ${slide.type === 'glossary_interactive' ? 'h-full' : (activeScripts.single || activeScripts.left) ? 'h-[65%]' : 'h-full'}`}>
                            <div className="w-full max-w-6xl slide-enter h-full flex flex-col justify-center">
                                {slide.type === "cover" ? (
                                    <div className="text-center space-y-3">
                                        <Icon name="globe" className="text-blue-600 mx-auto" size={24} />
                                        <h2 className="responsive-title font-black text-slate-900 tracking-tighter leading-none">{slide.title}</h2>
                                        <p className="text-[10px] md:text-lg text-blue-600 font-bold uppercase tracking-[0.4em]">{slide.subtitle}</p>
                                    </div>
                                ) : slide.type === "dual" ? (
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-2.5 h-full py-1">
                                        <div className="bg-white p-3 rounded-2xl border border-blue-50 shadow-sm flex flex-col overflow-hidden">
                                            <h3 className="text-blue-600 font-black text-[9px] mb-1.5 uppercase flex items-center gap-1.5"><Icon name="award" size={12} /> {slide.left.label}</h3>
                                            <div className="flex-1 overflow-hidden space-y-1.5">
                                                {(slide.left.items || []).map((it, i) => <div key={i} className="flex items-start gap-2"><div className="mt-1.5 w-1 h-1 rounded-full bg-blue-400 shrink-0" /><span className="responsive-point font-bold text-slate-700 leading-tight"><FormattedText text={it}/></span></div>)}
                                            </div>
                                        </div>
                                        <div className="bg-slate-50/50 p-3 rounded-2xl border border-slate-200 flex flex-col overflow-hidden">
                                            <h3 className="text-slate-600 font-black text-[9px] mb-1.5 uppercase flex items-center gap-1.5"><Icon name="target" size={12} /> {slide.right.label}</h3>
                                            <div className="flex-1 overflow-hidden">
                                                {slide.right.reason && <div className="text-blue-700 font-black text-[11px] mb-1 leading-none uppercase">{slide.right.reason}</div>}
                                                <div className="space-y-1.5">
                                                    {(slide.right.items || slide.right.details || []).map((it, i) => (
                                                        <div key={i} className="flex items-start gap-2"><div className="mt-1.5 w-1 h-1 rounded-full bg-emerald-500 shrink-0" /><span className="responsive-point font-bold text-slate-800 leading-tight"><FormattedText text={it}/></span></div>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                ) : slide.type === "glossary_interactive" ? (
                                    <div className="grid grid-cols-1 sm:grid-cols-3 gap-3 w-full h-full py-1 overflow-hidden pb-12">
                                        {slide.categories.map((cat, i) => (
                                            <div key={i} className="bg-white/50 p-3 rounded-3xl border border-slate-100 flex flex-col overflow-hidden">
                                                <h3 className="text-blue-600 font-black text-[9px] mb-2 uppercase tracking-widest flex items-center gap-2"><Icon name="book-open" size={12}/> {cat.label}</h3>
                                                <div className="space-y-3 overflow-y-auto custom-scroll pr-1">
                                                    {cat.keys.map((key, j) => {
                                                        const entry = dictionary[key];
                                                        if (!entry) return null;
                                                        return <div key={j} className="slide-enter"><TermCard term={key} entry={entry} isModal={false} /></div>;
                                                    })}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                ) : (
                                    <div className="space-y-3 w-full flex flex-col justify-center px-4">
                                        <div className="flex items-center gap-3"><Icon name={slide.icon || "file-text"} size={18} className="text-blue-600" /><h2 className="responsive-title font-black text-slate-900 leading-none">{slide.title}</h2></div>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-y-2.5">
                                            {slide.points?.map((p, i) => <div key={i} className="flex items-start gap-3 p-3 bg-white/60 rounded-xl shadow-sm"><div className="mt-1.5 w-1.5 h-1.5 rounded-full bg-blue-600 shrink-0" /><span className="responsive-point font-bold text-slate-700 leading-snug"><FormattedText text={p}/></span></div>)}
                                        </div>
                                    </div>
                                )}
                            </div>
                        </section>

                        {/* 下半部：腳本區佔比縮小至 35% */}
                        {slide.type !== 'glossary_interactive' && (activeScripts.single || activeScripts.left) && (
                            <section className="flex-1 bg-[#0f172a] flex flex-col relative z-10 border-t border-slate-800 overflow-hidden">
                                <div className="flex-1 overflow-y-auto custom-scroll flex items-start justify-center">
                                    {activeScripts.left !== undefined ? (
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 p-5 w-full max-w-7xl h-full pb-20">
                                            {['left', 'right'].map(type => (
                                                <div key={type} className="space-y-1 flex flex-col h-full overflow-hidden">
                                                    <div className="flex items-center justify-between border-b border-slate-800 pb-1 shrink-0">
                                                        <span className={`text-[8px] font-black uppercase tracking-widest ${type === 'left' ? 'text-blue-500' : 'text-emerald-500'}`}>SCRIPT: {type.toUpperCase()}</span>
                                                    </div>
                                                    <div className="flex-1 overflow-y-auto no-scrollbar">
                                                        <p className={`responsive-script italic leading-[1.3] font-black slide-enter opacity-95 ${type === 'left' ? 'text-slate-100' : 'text-slate-200'}`}>"<FormattedText text={getScriptText(slide.id, type)}/>"</p>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    ) : (
                                        <div className="p-5 text-center flex flex-col items-center h-full overflow-hidden pb-20">
                                            <div className="flex-1 overflow-y-auto no-scrollbar">
                                                <p className="responsive-script italic text-slate-100 leading-[1.3] font-black slide-enter opacity-95">"<FormattedText text={getScriptText(slide.id, 'single')}/>"</p>
                                            </div>
                                        </div>
                                    )}
                                </div>

                                {/* 手機版播放控制：拉抬至 bottom-12 避開底部紅框區 */}
                                <div className="absolute bottom-12 left-0 right-0 px-6 z-50 pointer-events-none">
                                    <div className="flex justify-center gap-3 pointer-events-auto">
                                        {slide.scriptLeft !== undefined ? (
                                            <div className="flex gap-2 p-1.5 audio-capsule rounded-full shadow-2xl">
                                                <button onClick={() => speak(getScriptText(slide.id, 'left'), 'en-US')} className="px-6 py-2.5 bg-blue-600 text-white rounded-full text-[10px] font-black flex items-center gap-2 active:scale-90 transition-all shadow-lg"><Icon name={isSpeaking ? "square" : "play"} /> RESULT</button>
                                                <button onClick={() => speak(getScriptText(slide.id, 'right'), 'en-US')} className="px-6 py-2.5 bg-emerald-600 text-white rounded-full text-[10px] font-black flex items-center gap-2 active:scale-90 transition-all shadow-lg"><Icon name={isSpeaking ? "square" : "play"} /> EXIT</button>
                                            </div>
                                        ) : (
                                            <div className="p-1.5 audio-capsule rounded-full shadow-2xl">
                                                <button onClick={() => speak(getScriptText(slide.id, 'single'), 'en-US')} className="px-12 py-2.5 bg-blue-600 text-white rounded-full text-[10px] font-black flex items-center gap-2 active:scale-90 transition-all shadow-lg"><Icon name={isSpeaking ? "square" : "play"} /> START PLAYBACK</button>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </section>
                        )}
                    </div>

                    <footer className="h-7 shrink-0 bg-white border-t border-slate-200 px-6 flex justify-between items-center z-50">
                        <button onClick={() => goToSlide(Math.max(0, currentSlide - 1))} disabled={currentSlide === 0} className="text-slate-300 font-black uppercase text-[7px] transition-all tracking-widest">Prev</button>
                        <div className="flex gap-1.5">
                            {originalSlides.map((_, i) => <button key={i} onClick={() => goToSlide(i)} className={`h-0.5 rounded-full transition-all duration-300 ${i === currentSlide ? 'w-5 bg-blue-600' : 'w-1 bg-slate-200'}`} />)}
                        </div>
                        <button onClick={() => goToSlide((currentSlide + 1) % originalSlides.length)} className="px-4 py-0.5 bg-slate-900 text-white rounded-lg text-[8px] font-black active:scale-95 transition-all">NEXT <Icon name="arrow-right" size={8} /></button>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
